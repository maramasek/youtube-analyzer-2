<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Kanál Analyzátor</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/papaparse@5.4.1/papaparse.min.js"></script>
</head>
<body>
    <div class="container">
        <header class="py-16">
            <h1>YouTube Kanál Analyzátor</h1>
            <p class="text-secondary">Analyzujte YouTube kanály a klasifikujte je podle obsahu</p>
        </header>

        <!-- API Key Section -->
        <section class="card mb-24">
            <div class="card__body">
                <h2 class="mb-16">YouTube Data API Klíč</h2>
                <div class="form-group">
                    <label for="apiKey" class="form-label">API Klíč:</label>
                    <div class="flex gap-8">
                        <input type="password" id="apiKey" class="form-control" placeholder="Zadejte váš YouTube Data API klíč">
                        <button type="button" id="toggleApiKey" class="btn btn--outline">Zobrazit</button>
                        <button type="button" id="saveApiKey" class="btn btn--primary">Uložit</button>
                    </div>
                    <small class="text-secondary">Klíč bude uložen lokálně pro opětovné použití</small>
                </div>
                <div id="apiKeyStatus" class="mt-8"></div>
            </div>
        </section>

        <!-- Input Methods -->
        <section class="card mb-24">
            <div class="card__body">
                <h2 class="mb-16">Způsob zadání dat</h2>
                
                <!-- Tabs -->
                <div class="tabs mb-16">
                    <button class="tab-btn active" data-tab="manual">Ruční zadání</button>
                    <button class="tab-btn" data-tab="csv">CSV soubor</button>
                </div>

                <!-- Manual Input Tab -->
                <div id="manual-tab" class="tab-content active">
                    <div class="form-group">
                        <label for="manualUrls" class="form-label">YouTube URL (každá na nový řádek):</label>
                        <textarea id="manualUrls" class="form-control" rows="8" placeholder="https://www.youtube.com/channel/UCbCmjCuTUZos6Inko4u57UQ&#10;https://www.youtube.com/@CoComelon&#10;https://www.youtube.com/watch?v=YQHsXMglC9A"></textarea>
                    </div>
                    <button type="button" id="loadSampleData" class="btn btn--secondary">Načíst ukázková data</button>
                </div>

                <!-- CSV Upload Tab -->
                <div id="csv-tab" class="tab-content hidden">
                    <div class="form-group">
                        <label for="csvFile" class="form-label">CSV soubor:</label>
                        <input type="file" id="csvFile" class="form-control" accept=".csv">
                    </div>
                    <div class="form-group">
                        <label for="csvColumn" class="form-label">Sloupec s URL:</label>
                        <select id="csvColumn" class="form-control">
                            <option value="">Vyberte sloupec...</option>
                        </select>
                    </div>
                    <div id="csvPreview" class="mt-16"></div>
                </div>
            </div>
        </section>

        <!-- Analysis Controls -->
        <section class="flex justify-between items-center mb-24">
            <button type="button" id="analyzeBtn" class="btn btn--primary btn--lg" disabled>
                Analyzovat kanály
            </button>
            <button type="button" id="exportBtn" class="btn btn--outline" disabled>
                Exportovat CSV
            </button>
        </section>

        <!-- Progress Bar -->
        <div id="progressSection" class="mb-24 hidden">
            <div class="progress-bar">
                <div id="progressFill" class="progress-fill"></div>
            </div>
            <div id="progressText" class="text-center mt-8">Probíhá analýza...</div>
        </div>

        <!-- Results Section -->
        <section id="resultsSection" class="hidden">
            <div class="flex justify-between items-center mb-16">
                <h2>Výsledky analýzy</h2>
                <div class="flex gap-8">
                    <select id="categoryFilter" class="form-control">
                        <option value="">Všechny kategorie</option>
                        <option value="Dětské">Dětské</option>
                        <option value="Teen">Teen</option>
                        <option value="Seriózní">Seriózní</option>
                        <option value="Smíšené">Smíšené</option>
                    </select>
                </div>
            </div>

            <div class="table-container">
                <table id="resultsTable" class="results-table">
                    <thead>
                        <tr>
                            <th>URL</th>
                            <th>Typ</th>
                            <th>Název kanálu</th>
                            <th>Odběratelé</th>
                            <th>Kategorie</th>
                            <th>Dětské %</th>
                            <th>Teen %</th>
                            <th>Seriózní %</th>
                            <th>Made for Kids</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </section>

        <!-- Error Messages -->
        <div id="errorMessages" class="mt-16"></div>
    </div>

    <script src="app.js"></script>
</body>
</html>